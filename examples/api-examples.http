### === EJEMPLOS DE API - PRODE API ===

# ===============================================
# üéØ FECHAS AUTOM√ÅTICAS (NUEVAS FUNCIONALIDADES)
# ===============================================

### 1. üß† Obtener fecha actual autom√°ticamente (RECOMENDADO)
# Esta es la ruta principal que deber√≠as usar en tu frontend
# Calcula autom√°ticamente qu√© fecha mostrar seg√∫n el estado de los partidos
GET {{host}}/promiedos/lpf/current
Accept: application/json

### 2. üî¢ Obtener solo el n√∫mero de fecha actual
# √ötil para saber qu√© fecha se est√° mostrando sin cargar todos los datos
GET {{host}}/promiedos/lpf/current/round
Accept: application/json

# ===============================================
# üìä FECHAS ESPEC√çFICAS 
# ===============================================

### 3. Obtener fecha espec√≠fica (fecha 1)
GET {{host}}/promiedos/lpf/1
Accept: application/json

### 4. Obtener fecha espec√≠fica (fecha 2)
GET {{host}}/promiedos/lpf/2
Accept: application/json

# ===============================================
# üèÜ ESCUDOS DE EQUIPOS
# ===============================================

### 5. Obtener escudo de equipo (tama√±o 1)
GET {{host}}/promiedos/lpf/crest/igi?size=1
Accept: application/json

# ===============================================
# üìä MONITOREO DE CRON JOBS
# ===============================================

### 16. Estado actual de todos los cron jobs
GET {{host}}/promiedos/monitoring/cron-jobs/status
Accept: application/json

### 17. Estad√≠sticas de cron jobs (√∫ltimas 24 horas)
GET {{host}}/promiedos/monitoring/cron-jobs/stats?hours=24
Accept: application/json

### 18. Estad√≠sticas de un cron job espec√≠fico
GET {{host}}/promiedos/monitoring/cron-jobs/stats?jobName=update-current-matchday&hours=48
Accept: application/json

### 19. Historial detallado de ejecuciones
GET {{host}}/promiedos/monitoring/cron-jobs/history?limit=20
Accept: application/json

### 20. Historial de un cron job espec√≠fico
GET {{host}}/promiedos/monitoring/cron-jobs/history?jobName=process-points-dynamic&limit=10
Accept: application/json

### 21. Ejecutar cron job manualmente (solo testing)
GET {{host}}/promiedos/monitoring/cron-jobs/execute/update-current-matchday
Accept: application/json

# ===============================================
# üîê AUTENTICACI√ìN CON GOOGLE
# ===============================================

### 6. Iniciar login con Google (abrir en navegador)
GET {{host}}/auth/google

### 7. Verificar token de Google desde frontend
POST {{host}}/auth/google/verify
Content-Type: application/json

{
  "credential": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjZmNzI1YTdkZjU5ZWQ..."
}

### 8. Obtener perfil de usuario autenticado
GET {{host}}/auth/profile
Authorization: Bearer {{jwt_token}}

# ===============================================
# üë§ GESTI√ìN DE USUARIOS
# ===============================================

### 9. Crear usuario
POST {{host}}/users
Content-Type: application/json

{
  "name": "Juan P√©rez",
  "email": "juan@ejemplo.com"
}

### 10. Obtener todos los usuarios
GET {{host}}/users
Accept: application/json

# ===============================================
# üé≤ PRON√ìSTICOS
# ===============================================

### 11. Crear pron√≥stico (requiere autenticaci√≥n)
# NOTA: Solo puedes crear UN pron√≥stico por partido
# Si ya tienes uno, usa PATCH para editarlo
POST {{host}}/pronostics
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "externalId": "edcgcdj",
  "prediction": {
    "scores": [2, 1],
    "scorers": {
      "local": "Juli√°n √Ålvarez",
      "visitor": "Enzo Fern√°ndez"
    }
  }
}

### 12. Obtener mis pron√≥sticos (requiere autenticaci√≥n)
GET {{host}}/pronostics/my-pronostics
Authorization: Bearer {{jwt_token}}

### 13. Obtener todos los pron√≥sticos
GET {{host}}/pronostics
Accept: application/json

### 14. Actualizar pron√≥stico (requiere autenticaci√≥n y ser propietario)
PATCH {{host}}/pronostics/1
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "prediction": {
    "scores": [1, 0],
    "scorers": {
      "local": "Lionel Messi"
    }
  }
}

### 15. Eliminar pron√≥stico (requiere autenticaci√≥n y ser propietario)
DELETE {{host}}/pronostics/1
Authorization: Bearer {{jwt_token}}

# ===============================================
# üìã VARIABLES DE ENTORNO
# ===============================================

@host = http://localhost:3000
@jwt_token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ===============================================
# ‚ùå POSIBLES ERRORES COMUNES
# ===============================================

### Error: Pron√≥stico duplicado (409 Conflict)
# Si intentas crear un segundo pron√≥stico para el mismo partido:
# {
#   "statusCode": 409,
#   "message": "Ya tienes un pron√≥stico para este partido. Puedes editarlo usando PATCH /pronostics/123"
# }

### Error: Token inv√°lido (401 Unauthorized)
# Si el JWT token est√° mal o expir√≥:
# {
#   "statusCode": 401,
#   "message": "Unauthorized"
# }

# ===============================================
# üí° NOTAS IMPORTANTES
# ===============================================

# üéØ FECHA AUTOM√ÅTICA:
# - /promiedos/lpf/current -> Usa SIEMPRE esta ruta en producci√≥n
# - La API calcula autom√°ticamente qu√© fecha mostrar
# - Considera partidos en vivo, finalizados y programados
# - Maneja fechas con informaci√≥n incompleta

# üîê AUTENTICACI√ìN:
# - Todas las rutas de creaci√≥n/edici√≥n requieren JWT
# - Obt√©n el token con Google OAuth: /auth/google
# - Incluye: Authorization: Bearer <token>
# - NO incluyas userId en el JSON, se obtiene autom√°ticamente del token

# üé≤ PRON√ìSTICOS:
# - Solo UN pron√≥stico por partido por usuario
# - Si ya tienes uno, usa PATCH /pronostics/:id para editarlo
# - El userId se obtiene autom√°ticamente del token JWT

# üìä MONITOREO DE CRON JOBS:
# - /monitoring/cron-jobs/status -> Estado actual de todos los cron jobs
# - /monitoring/cron-jobs/stats -> Estad√≠sticas de rendimiento y errores
# - /monitoring/cron-jobs/history -> Historial detallado de ejecuciones
# - Todos los cron jobs se auditan autom√°ticamente en la base de datos
# - Los errores se reportan autom√°ticamente a Sentry
# - Las m√©tricas se env√≠an autom√°ticamente a New Relic

# üìä ESTADOS DE PARTIDOS:
# - enum: 1 = Programado, 2 = En vivo, 3 = Finalizado
# - La l√≥gica autom√°tica usa estos estados para decidir

# üé≤ PRON√ìSTICOS:
# - Solo puedes editar/eliminar tus propios pron√≥sticos
# - El campo "prediction" es JSON libre (scores, scorers, etc.)
# - externalId debe coincidir con el ID del partido en Promiedos

# üèÜ ESCUDOS:
# - size: 1-5 (1 = m√°s peque√±o, 5 = m√°s grande)
# - teamId: usar el ID del equipo desde /promiedos/lpf/current

# ===============================================
# üèÜ SISTEMA DE TORNEOS
# ===============================================

### 16. Crear un nuevo torneo (requiere autenticaci√≥n)
POST {{host}}/tournaments
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "name": "Liga Amigos 2025",
  "description": "Torneo de pron√≥sticos entre amigos para la Liga Profesional"
}

### 17. Unirse a un torneo con c√≥digo (requiere autenticaci√≥n)
POST {{host}}/tournaments/join
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "inviteCode": "ABC123"
}

### 18. Obtener mis torneos (requiere autenticaci√≥n)
GET {{host}}/tournaments/my-tournaments
Authorization: Bearer {{jwt_token}}

### 19. Obtener detalles de un torneo espec√≠fico (requiere autenticaci√≥n y participaci√≥n)
GET {{host}}/tournaments/1
Authorization: Bearer {{jwt_token}}

### 20. Obtener tabla de posiciones de un torneo (requiere autenticaci√≥n y participaci√≥n)
GET {{host}}/tournaments/1/leaderboard
Authorization: Bearer {{jwt_token}}

# ===============================================
# üí° NOTAS SOBRE TORNEOS
# ===============================================

# üèÜ CREACI√ìN DE TORNEOS:
# - Al crear un torneo, autom√°ticamente te unes con 0 puntos
# - Se genera un c√≥digo √∫nico de 6 caracteres (ej: ABC123)
# - El creador puede compartir este c√≥digo para invitar amigos

# üéØ UNIRSE A TORNEOS:
# - Usa el c√≥digo de invitaci√≥n para unirte
# - No puedes unirte dos veces al mismo torneo
# - Empiezas con 0 puntos

# üìä PUNTOS Y POSICIONES:
# - Los puntos se calculan autom√°ticamente (l√≥gica por definir)
# - La tabla se ordena por puntos (desc) y fecha de uni√≥n (asc) como desempate
# - Solo puedes ver torneos en los que participas

# üîí SEGURIDAD:
# - Todas las operaciones requieren autenticaci√≥n JWT
# - Solo puedes acceder a torneos en los que participas
# - Los c√≥digos de invitaci√≥n son √∫nicos e irrepetibles

# ===============================================
# üéØ SISTEMA DE PUNTOS Y RANKINGS
# ===============================================

### 21. Obtener ranking de una fecha espec√≠fica (requiere autenticaci√≥n y participaci√≥n)
GET {{host}}/tournaments/1/matchday/5/ranking
Authorization: Bearer {{jwt_token}}

### 22. Obtener ranking acumulativo detallado (requiere autenticaci√≥n y participaci√≥n)
GET {{host}}/tournaments/1/ranking-detailed
Authorization: Bearer {{jwt_token}}

# ===============================================
# üîß ENDPOINTS ADMINISTRATIVOS - SISTEMA DE PUNTOS
# ===============================================

### 23. Procesar puntos manualmente (para testing)
GET {{host}}/promiedos/admin/points/process-now
Accept: application/json

### 24. Activar procesamiento autom√°tico de puntos
GET {{host}}/promiedos/admin/points/activate
Accept: application/json

### 25. Desactivar procesamiento autom√°tico de puntos
GET {{host}}/promiedos/admin/points/deactivate
Accept: application/json

### 26. Ver estado del sistema de puntos
GET {{host}}/promiedos/admin/points/status
Accept: application/json

# ===============================================
# üí° NOTAS SOBRE SISTEMA DE PUNTOS
# ===============================================

# üé≤ PUNTUACI√ìN:
# - Resultado exacto: 3 puntos
# - Solo resultado (ganador/empate): 1 punto
# - Goleador local acertado: 5 puntos
# - Goleador visitante acertado: 5 puntos
# - M√°ximo posible: 13 puntos (resultado exacto + 2 goleadores)
# - Los goleadores son opcionales, solo 1 por equipo

# ‚è∞ PROCESAMIENTO AUTOM√ÅTICO:
# - A las 11 AM verifica si hay partidos hoy
# - Si hay partidos, activa procesamiento de 15:00 a 01:00
# - Procesa cada 5 minutos durante horario activo
# - Solo procesa partidos finalizados (status = 3)

# üìä RANKINGS:
# - Rankings por fecha: qui√©n gan√≥ cada fecha
# - Rankings acumulativos: puntos totales del torneo
# - Desempate por fecha de pron√≥stico/uni√≥n

# üîß TESTING:
# - Usa endpoints admin/points/* para probar manualmente
# - Los puntos se calculan autom√°ticamente para todos los torneos
# - Un pron√≥stico solo se procesa una vez (campo 'processed') 